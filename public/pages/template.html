<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<title>CSC 370 Project</title>

		<!-- CSS  -->
		<!-- load bootstrap from CDN and custom CSS -->
		<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
		<link rel="stylesheet" href="/styles/style.css">

		
		<!-- JS -->
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
		<script type="text/javascript" src="/scripts/main.js"></script>


	</head>

	<body>
	
	
	<!-- HEADER -->

	<div class="page-header" style="margin-bottom:0px;">
		<h1>SubSaiditt Template  <small>Lots of Code Here! </small></h1>
	</div>
	<!-- HEADER -->
	
	<!-- NAVBAR -->
	<nav class="navbar navbar-inverse">
	  <div class="container-fluid">
		<!-- Brand and toggle get grouped for better mobile display -->
		<div class="navbar-header">
		  <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
			<span class="sr-only">Toggle navigation</span>
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>
		  </button>
		 
		  <a class="navbar-brand" href="#"><img src="../images/logo_2.png"></a>
		</div>

		<!-- Collect the nav links, forms, and other content for toggling -->
		<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
		  <ul class="nav navbar-nav">
		  
			<li><a href="/pages/index.html">Front Page<span class="sr-only">(current)</span></a></li>
			
			<li class="active"><a href="/pages/template.html">Template</a></li>
			
			<li class="dropdown">
			  <a href="" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Other <span class="caret"></span></a>
			  <ul class="dropdown-menu">
				<li><a href="">Front Page (Logged In)</a></li>
				<li role="separator" class="divider"></li>
				<li><a href="">Populate Tables</a></li>
				<li role="separator" class="divider"></li>
				<li><a href="">Delete a Post</a></li>
			  </ul>
			</li>
			
		  </ul>
			
			<form id="login_frm" class="navbar-form navbar-right">
			<div class="form-group">
			  <input type="text" class="form-control" placeholder="User" name="user">
				<input type="password" class="form-control" placeholder="Pass" name="pass">
			</div>
			<button class="btn btn-default" type="button" onclick="login()">Login</button>
		  </form>
			
			<script>
			function login(){
	
				var form = $('#login_frm');
				var user_input = form.find("input[name='user']");
				var pass_input = form.find("input[name='pass']");
				var loginData = {
					user:user_input.val(),
					pass:pass_input.val()
				};
				
				console.log(loginData);
				console.log(JSON.stringify(loginData));

				$.ajax({
					url: "/login",
					type: "POST",
					data: loginData,
					success: isError
				});
				
				user_input.val("");
				pass_input.val("");
				
				
	
			}
			
			
			
			
			function isError(data){
			
				if(data.error){
					alert("Incorrect Login")
				}
					
				else{
					alert("Successful Login!")
				}
				
			
			
			}
			</script>
			
			
			<!--
		  <form class="navbar-form navbar-right" role="search">
			<div class="form-group">
			  <input type="text" class="form-control" placeholder="Search">
			</div>
			<button type="submit" class="btn btn-default">Submit</button>
		  </form>
			-->
			
		</div><!-- /.navbar-collapse -->
	  </div><!-- /.container-fluid -->
	</nav>
	<!-- END OF NAVBAR -->
	
	
	<!-- CONTENT -->
	<div class="container content-view">
	  <div class="row">
	  
		<!-- LEFT SIDEBAR -->
		<div class="col-sm-2">
		  <a href="">Top Voted Posts <span class="badge">2</span></a>
		  <button type="button" class="btn btn-default navbar-btn">Refresh</button>
		</div>
		<!-- END OF LEFT SIDEBAR -->
		
		
		<!-- CENTRE AREA -->
		<div class="col-sm-8">
		
		
		<!-- EXAMPLE PANEL 1 -->
		<div class="panel panel-default">
		  <div class="panel-heading">
			<h3 class="panel-title">Example Post 1</h3>
		  </div>
		  <div class="panel-body">
			Post 1 content
		  </div>
		</div>
		<!-- END OF EXAMPLE PANEL 1 -->
		
		<!-- EXAMPLE PANEL 2 -->
		<div class="panel panel-default">
		  <div class="panel-heading">
			<h3 class="panel-title">Example Form for AJAX Testing</h3>
		  </div>
		  <div class="panel-body">
		  
			<form class="navbar-form navbar-left" method="POST" role="form" id="frm1" action="">
				
				<h4>Data in Server <span class="label label-default">New</span></h4>
				<button type="button" onclick="getDataFromServer()" class="fleft btn btn-secondary">Refresh</button>


				<div class="jumbotron" id="test">
				</div>
				
				<div class="input-group">
					<input type="text" class="form-control" placeholder="Data1" aria-describedby="basic-addon1" name="d1">
					<span class="input-group-addon" id="basic-addon1"> </span>
					<input type="Password" class="form-control" placeholder="Data2" aria-describedby="basic-addon1" name="d2">
					<span class="input-group-addon" id="basic-addon1"> </span>
					<input type="number" class="form-control" placeholder="Data3" aria-describedby="basic-addon1" name="d3">
					<span class="input-group-btn">
						<button type="button" onclick="setDataFromServer()" class="btn btn-default">Submit to Server</button>
					</span>
				</div>
			<script>
			
			$(document).ready(function(){
				getDataFromServer();

			});
			
			function getDataFromServer(){
				var form = $("#frm1");
				test = $("#test")
				
				//async, if only action on page should be sync!!
				getAjax(function(output){
					data = JSON.parse(output);
					test.text(JSON.stringify(data));
				});
				
			}
			
			
			function setDataFromServer() {
				
				var form = $("#frm1");
				var d1 = form.find("input[name='d1']").val();
				var d2 = form.find("input[name='d2']").val();
				var d3 = form.find("input[name='d3']").val();
				
				var testData = {
					d1:d1,
					d2:d2,
					d3:d3
				};
				
				test = $("#test")
				
				postAjax(testData, function(output){
					test.text(JSON.stringify(testData));
				});
				
			}
			</script>
		
		  
			</form>
			
			
		  </div>
		</div>
		<!-- END OF EXAMPLE PANEL 2 -->
		
		<!-- ADD FRIEND -->
		<div class="panel panel-default">
		<div class="panel-heading">
			<h3 class="panel-title">Add Friend</h3>
		</div>
		<div class="panel-body">
		
		<form id="addFriend" class="navbar-form navbar-left">
	
			<div class="input-group">
				<input type="text" class="form-control" placeholder="Username" aria-describedby="basic-addon1" name="user1">
				<span class="input-group-addon" id="basic-addon1"> </span>
				<input type="text" class="form-control" placeholder="Username" aria-describedby="basic-addon1" name="user2">
				<span class="input-group-btn">
					<button type="button" onclick="addFriend()" class="btn btn-default">Submit</button>					
				</span>

			</div>
		  
		</form>
		</div>
		</div>
		
		
			<script>
			function addFriend(){
	
				//get users from form
				var form = $('#addFriend');
				var user1_input = form.find("input[name='user1']");
				var user2_input = form.find("input[name='user2']");
				var friendData = {
					user1:user1_input.val(),
					user2:user2_input.val()
				};
				
				//log that (best for debugging)
				console.log(friendData);
				console.log(JSON.stringify(friendData));

				//send friendData as POST to server
				$.ajax({
					url: "/friends",
					type: "POST",
					data: friendData,
					success: function (data) {
						console.log('Success: ')
						alert("Friend Added")
					},
					error: function (xhr, status, error) {
						console.log(error);
						alert("Error! You have no friends :p")
					}
			
				});
				
				user1_input.val("");
				user2_input.val("");
				
				
	
			}
		
			</script>
		

		<!-- EXAMPLE PANEL 3 -->
		<div class="panel panel-default">
		<div class="panel-heading">
			<h3 class="panel-title">Sign Up</h3>
		</div>
		<div class="panel-body">
		
		<form id="signup_frm" class="navbar-form navbar-left">
	
			<div class="input-group">
				<input type="text" class="form-control" placeholder="Username" aria-describedby="basic-addon1" name="user">
				<span class="input-group-addon" id="basic-addon1"> </span>
				<input type="Password" class="form-control" placeholder="Password" aria-describedby="basic-addon1" name ="pass">
				<span class="input-group-addon" id="basic-addon1"> </span>
				<input type="number" class="form-control" placeholder="Reputation" aria-describedby="basic-addon1" name="rep">
				<span class="input-group-btn">
					<button type="button" onclick="signup()" class="btn btn-default">Submit</button>					
				</span>

			</div>
		  
		</form>
		
		<script>
			function signup(){
	
				var form = $('#signup_frm');
				var user_input = form.find("input[name='user']");
				var pass_input = form.find("input[name='pass']");
				var rep_input  = form.find("input[name='rep']");
				
				var signupData = {
					user:user_input.val(),
					pass:pass_input.val(),
					rep: rep_input.val()
				};
				
				console.log(signupData);
				console.log(JSON.stringify(signupData));

				$.ajax({
					url: "/signup",
					type: "POST",
					data: signupData,
					success: isError1
				});
				
				user_input.val("");
				pass_input.val("");
				rep_input.val("");
				
	
			}
			
			function isError1(data){
			
				if(data.error){
					alert("Username already exists")
				}
				else{
					alert("Successful Signup!")
				}
				
			
			
			}
			</script>
		
		
		
		
		</div>
		</div>
		<!-- END OF EXAMPLE PANEL 3 -->
		
			
			
			
		<!-- EXAMPLE PANEL 4 -->
		
		<div class="panel panel-default" id="example_tab">
			<div class="panel-heading">
				<h3 class="panel-title">Example BootStrap Table</h3>
			</div>
			
			<div class="panel-body">
				<p>The data in this table is loaded at runtime using JS.</p>
			</div>
			
			<!-- Table -->
			<table class="table">
			
			</table>
		</div>
		<!-- END OF EXAMPLE PANEL 4 -->
		
		
		<script>
			//add rows of data to example table using JS on page load
			$(document).ready(function(){
				
				var data = [["City 1", "City 2", "City 3"], //headers
							["New York", "LA", "Seattle"], 
							["Paris", "Milan", "Rome"], 
							["Pittsburg", "Wichita", "Boise"]];
							
				var exTable = makeTable($("#example_tab"), data);
			
			});
			
			
			
			
			function makeTable(container, data) {
				var table = $("table").addClass('CSSTableGenerator');
				$.each(data, function(rowIndex, r) {
					var row = $("<tr/>");
					$.each(r, function(colIndex, c) { 
						row.append($("<t"+(rowIndex == 0 ?  "h" : "d")+"/>").text(c));
					});
					table.append(row);
				});
				return container.append(table);
			}
			
			
		</script>
		

		</div>
		<!-- END OF CENTRE AREA -->
		
		<!-- RIGHT SIDEBAR -->
		<div class="col-sm-2">
		  
		</div>
		<!-- END OF RIGHT SIDEBAR -->
		
	  </div>
	</div>
	
	

	
	</body>
</html>
